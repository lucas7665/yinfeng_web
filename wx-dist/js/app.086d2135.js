(function(){"use strict";var e={9097:function(e,t,a){var n=a(5130),o=a(6768),r=a(1387),u=a(144),l={__name:"TabBar",setup(e){const t=(0,r.lq)(),a=(0,u.KR)(0);return(0,o.wB)((()=>t.path),(e=>{switch(e){case"/assistant":a.value=0;break;case"/report":a.value=1;break;case"/plan":a.value=2;break;case"/profile":a.value=3;break}}),{immediate:!0}),(e,t)=>{const n=(0,o.g2)("van-tabbar-item"),r=(0,o.g2)("van-tabbar");return(0,o.uX)(),(0,o.Wv)(r,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),route:""},{default:(0,o.k6)((()=>[(0,o.bF)(n,{icon:"chat-o",to:"/assistant"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("健康助手")]))),_:1}),(0,o.bF)(n,{icon:"notes-o",to:"/report"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("体检报告")]))),_:1}),(0,o.bF)(n,{icon:"todo-list-o",to:"/plan"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("健康方案")]))),_:1}),(0,o.bF)(n,{icon:"user-o",to:"/profile"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("个人中心")]))),_:1})])),_:1},8,["modelValue"])}}};const i=l;var s=i;const c={id:"app"};var d={__name:"App",setup(e){const t=(0,r.lq)(),a=(0,o.EW)((()=>"/login"===t.path));return(e,t)=>{const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(n),a.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(s,{key:0}))])}}};const f=d;var p=f,m=(a(4114),a(4232)),v=a(715),h=a(4373);const b={class:"login-page"},g={class:"login-form"},k={class:"submit-btn"},y={style:{margin:"16px"}},w={class:"other-login"},_={class:"social-login"};var F={__name:"Login",setup(e){const t=(0,r.rd)(),a=(0,u.KR)(0),n=(0,u.KR)(""),l=(0,u.KR)(""),i=(0,u.KR)(0),s=(0,u.KR)({username:"",password:""}),c=h.A.create({baseURL:"https://lgj-8082.colorstoneai.com",timeout:1e4,headers:{"Content-Type":"application/json"}}),d=async e=>{try{const a=await c.post("/api/auth/login",{username:e.username,password:e.password});0===a.data.code?(localStorage.setItem("token",a.data.data.token),(0,v.P0)("登录成功"),await t.push("/report")):(0,v.P0)(a.data.message||"登录失败")}catch(a){console.error("登录失败:",a),(0,v.P0)("登录失败")}},f=async()=>{if(n.value)if(/^1[3-9]\d{9}$/.test(n.value))try{(0,v.D0)({message:"发送中...",forbidClick:!0});const e=await c.post("/api/sms/send-code",{phone:n.value});if(0===e.data.code){(0,v.P0)("验证码已发送"),i.value=60;const e=setInterval((()=>{i.value--,i.value<=0&&clearInterval(e)}),1e3)}else(0,v.P0)(e.data.message||"发送失败")}catch(e){(0,v.P0)("发送失败"),console.error("发送验证码失败:",e)}finally{(0,v.cQ)()}else(0,v.P0)("请输入正确的手机号");else(0,v.P0)("请先输入手机号")},p=async()=>{if(n.value&&l.value)try{(0,v.D0)({message:"登录中...",forbidClick:!0});const e=await c.post("/api/auth/login/phone",{phone:n.value,code:l.value});0===e.data.code?(localStorage.setItem("token",e.data.data.token),(0,v.P0)("登录成功"),t.push("/")):(0,v.P0)(e.data.message||"登录失败")}catch(e){(0,v.P0)("登录失败"),console.error("登录失败:",e)}finally{(0,v.cQ)()}else(0,v.P0)("请输入手机号和验证码")},F=async()=>{try{(0,v.D0)({message:"正在跳转...",forbidClick:!0});const e=await c.get("/api/auth/wechat/auth-url");200===e.data.code?window.location.href=e.data.data:(0,v.P0)("获取微信登录链接失败")}catch(e){console.error("微信登录失败:",e),(0,v.P0)("微信登录失败，请重试")}finally{(0,v.cQ)()}};return(e,t)=>{const r=(0,o.g2)("van-nav-bar"),u=(0,o.g2)("van-field"),c=(0,o.g2)("van-cell-group"),v=(0,o.g2)("van-button"),h=(0,o.g2)("van-form"),P=(0,o.g2)("van-tab"),C=(0,o.g2)("van-tabs");return(0,o.uX)(),(0,o.CE)("div",b,[(0,o.bF)(r,{title:"登录"}),(0,o.Lk)("div",g,[(0,o.bF)(C,{active:a.value,"onUpdate:active":t[4]||(t[4]=e=>a.value=e)},{default:(0,o.k6)((()=>[(0,o.bF)(P,{title:"账号密码登录"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{onSubmit:d},{default:(0,o.k6)((()=>[(0,o.bF)(c,{inset:""},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:s.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.username=e),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名"}]},null,8,["modelValue"]),(0,o.bF)(u,{modelValue:s.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.password=e),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"}]},null,8,["modelValue"])])),_:1}),(0,o.Lk)("div",k,[(0,o.bF)(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)(" 登录 ")]))),_:1})])])),_:1})])),_:1}),(0,o.bF)(P,{title:"验证码登录"},{default:(0,o.k6)((()=>[(0,o.bF)(h,{onSubmit:p},{default:(0,o.k6)((()=>[(0,o.bF)(c,{inset:""},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),name:"phone",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"}]},null,8,["modelValue"]),(0,o.bF)(u,{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e),name:"code",label:"验证码",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},{button:(0,o.k6)((()=>[(0,o.bF)(v,{size:"small",type:"primary",onClick:f,disabled:!!i.value},{default:(0,o.k6)((()=>[(0,o.eW)((0,m.v_)(i.value?`${i.value}s后重试`:"获取验证码"),1)])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Lk)("div",y,[(0,o.bF)(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)(" 登录 ")]))),_:1})])])),_:1})])),_:1})])),_:1},8,["active"]),(0,o.Lk)("div",w,[t[8]||(t[8]=(0,o.Lk)("div",{class:"divider"},[(0,o.Lk)("span",null,"其他登录方式")],-1)),(0,o.Lk)("div",_,[(0,o.bF)(v,{round:"",icon:"wechat",color:"#07c160",class:"wechat-btn",onClick:F},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" 微信登录 ")]))),_:1})])])])])}}},P=a(1241);const C=(0,P.A)(F,[["__scopeId","data-v-7fd27d88"]]);var E=C;const A=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:E},{path:"/report",name:"Report",component:()=>a.e(973).then(a.bind(a,973)),meta:{requiresAuth:!0}},{path:"/assistant",name:"Assistant",component:()=>a.e(482).then(a.bind(a,5482))},{path:"/plan",name:"Plan",component:()=>a.e(335).then(a.bind(a,5335))},{path:"/profile",name:"Profile",component:()=>a.e(800).then(a.bind(a,6800))},{path:"/payment",name:"Payment",component:()=>a.e(547).then(a.bind(a,2547))},{path:"/api/auth/wechat/callback",name:"WxCallback",component:()=>a.e(629).then(a.bind(a,8629))}],L=(0,r.aE)({history:(0,r.LA)(""),routes:A});L.beforeEach(((e,t,a)=>{const n=localStorage.getItem("token");e.meta.requiresAuth&&!n?a("/login"):"/login"===e.path&&n?a("/report"):a()}));var V=L,S=a(122),j=a(3219),O=a(1667),q=a(7481),T=a(8139),W=a(8742),x=a(311),N=a(9990),U=a(5474),I=a(7652),K=a(6235),R=a(3788),B=a(9814),D=a(2976),Q=a(9787),X=a(5319),z=a(305),M=a(1656),$=a(8134),H=a(5314),G=a(8291);a(2241);const J=(0,n.Ef)(p);J.use(V),J.use(S.$n),J.use(j.oz),J.use(O.tU),J.use(q.B8),J.use(T.fh),J.use(W.vw),J.use(x.HF),J.use(N.gq),J.use(U.y8),J.use(I.lV),J.use(K.D0),J.use(R.Qh),J.use(B.jq),J.use(D.dK),J.use(Q.Sv),J.use(X.lG),J.use(z.sx),J.use(M.z6),J.use($._V),J.use(H.In),J.use(G.TextArea),J.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var u=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,i=0;i<n.length;i++)(!1&r||u>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(l=!1,r<u&&(u=r));if(l){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{335:"d437479f",482:"cc3a0695",547:"ee1f7a9a",629:"f63f8c3a",800:"638b8599",973:"fe0df548"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{335:"cbb76d69",482:"83aecb61",547:"5eda9207",629:"1db91c5a",800:"9b752eea",973:"8e1fe282"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="health-app:";a.l=function(n,o,r,u){if(e[n])e[n].push(o);else{var l,i;if(void 0!==r)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+r),l.src=n),e[n]=[o];var f=function(t,a){l.onerror=l.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,r){var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",a.nc&&(u.nonce=a.nc);var l=function(a){if(u.onerror=u.onload=null,"load"===a.type)o();else{var n=a&&a.type,l=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+l+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=n,i.request=l,u.parentNode&&u.parentNode.removeChild(u),r(i)}};return u.onerror=u.onload=l,u.href=t,n?n.parentNode.insertBefore(u,n.nextSibling):document.head.appendChild(u),u},t=function(e,t){for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var u=document.getElementsByTagName("style");for(n=0;n<u.length;n++){o=u[n],r=o.getAttribute("data-href");if(r===e||r===t)return o}},n=function(n){return new Promise((function(o,r){var u=a.miniCssF(n),l=a.p+u;if(t(u,l))return o();e(n,l,null,o,r)}))},o={524:0};a.f.miniCss=function(e,t){var a={335:1,482:1,547:1,629:1,800:1,973:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,n){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((function(a,n){o=e[t]=[a,n]}));n.push(o[2]=r);var u=a.p+a.u(t),l=new Error,i=function(n){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+u+")",l.name="ChunkLoadError",l.type=r,l.request=u,o[1](l)}};a.l(u,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,u=n[0],l=n[1],i=n[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(i)var c=i(a)}for(t&&t(n);s<u.length;s++)r=u[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkhealth_app"]=self["webpackChunkhealth_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(9097)}));n=a.O(n)})();
//# sourceMappingURL=app.086d2135.js.map