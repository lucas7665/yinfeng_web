{"version":3,"file":"js/629.f63f8c3a.js","mappings":"uRAYA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,M,OAEdC,EAAAA,EAAAA,KAAUC,UACR,MAAM,KAAEC,GAASJ,EAAMK,MAEvB,IAAKD,EAGH,OAFAE,EAAAA,EAAAA,IAAU,iBACVR,EAAOS,KAAK,UAId,IACE,MAAMC,EAAOC,EAAAA,EAAMC,OAAO,CACxBC,QAAS,oCACTC,QAAS,IACTC,QAAS,CACP,eAAgB,sBAIdC,QAAYN,EAAKO,IAAI,kCAAkCX,KAG7D,GAFAY,QAAQC,IAAI,UAAWH,EAAII,MAEL,MAAlBJ,EAAII,KAAKd,KAAc,CACzB,MAAM,MAAEe,EAAK,KAAEC,GAASN,EAAII,KAAKA,KACjCF,QAAQC,IAAI,kBAAmB,CAAEE,QAAOC,SAExCC,aAAaC,QAAQ,QAASH,GAC9BE,aAAaC,QAAQ,gBAAiB,UAAUH,KAChDE,aAAaC,QAAQ,WAAYC,KAAKC,UAAUJ,KAEhDd,EAAAA,EAAAA,IAAU,cACJR,EAAOS,KAAK,UACpB,MACED,EAAAA,EAAAA,IAAUQ,EAAII,KAAKO,SAAW,cACxB3B,EAAOS,KAAK,SAEtB,CAAE,MAAOmB,GACPV,QAAQU,MAAM,cAAeA,IAC7BpB,EAAAA,EAAAA,IAAU,kBACJR,EAAOS,KAAK,SACpB,K,kMChDF,MAAMoB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://health-app/./src/views/WxCallback.vue","webpack://health-app/./src/views/WxCallback.vue?8895"],"sourcesContent":["<template>\n  <div class=\"callback-page\">\n    <van-loading size=\"24px\" vertical>登录处理中...</van-loading>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { showToast } from 'vant'\nimport axios from 'axios'\n\nconst router = useRouter()\nconst route = useRoute()\n\nonMounted(async () => {\n  const { code } = route.query\n  \n  if (!code) {\n    showToast('登录失败，请重试')\n    router.push('/login')\n    return\n  }\n\n  try {\n    const http = axios.create({\n      baseURL: 'https://lgj-8082.colorstoneai.com',\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n\n    const res = await http.get(`/api/auth/wechat/callback?code=${code}`)\n    console.log('微信回调响应:', res.data)\n    \n    if (res.data.code === 200) {\n      const { token, user } = res.data.data\n      console.log('获取到的token和用户信息:', { token, user })\n      \n      localStorage.setItem('token', token)\n      localStorage.setItem('Authorization', `Bearer ${token}`)\n      localStorage.setItem('userInfo', JSON.stringify(user))\n      \n      showToast('登录成功')\n      await router.push('/report')\n    } else {\n      showToast(res.data.message || '登录失败')\n      await router.push('/login')\n    }\n  } catch (error) {\n    console.error('微信登录回调处理失败:', error)\n    showToast('登录失败，请重试')\n    await router.push('/login')\n  }\n})\n</script>\n\n<style scoped>\n.callback-page {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #f0f5ff;\n}\n</style> ","import script from \"./WxCallback.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WxCallback.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WxCallback.vue?vue&type=style&index=0&id=4d489b1c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4d489b1c\"]])\n\nexport default __exports__"],"names":["router","useRouter","route","useRoute","onMounted","async","code","query","showToast","push","http","axios","create","baseURL","timeout","headers","res","get","console","log","data","token","user","localStorage","setItem","JSON","stringify","message","error","__exports__"],"sourceRoot":""}